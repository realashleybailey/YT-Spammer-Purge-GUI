// require PCRE from 'pcre-to-regexp';
const PCRE = require('pcre-to-regexp');

var url = "%(?(DEFINE) (?<x>(?:\*|_|\~|\||`|\[|\]|\(|\)|'|\-|\.|â€¢|,|\s|\p{Mn}){0,3}))(?(DEFINE) (?<nums>(?&x)(?:ï¼|ï¼‘|ï¼’|ï¼“|ï¼”|ï¼•|ï¼–|ï¼—|ï¼˜|ï¼™|ï¼|ï¼‘|ï¼’|ï¼“|ï¼”|ï¼•|ï¼–|ï¼—|ï¼˜|ï¼™|ß|â‘ |â‘´|â’ˆ|â“µ|â¶|â€|âŠ|ğŸ„‚|à±½|à©¨|â‘¡|â‘µ|â’‰|â“¶|â·|â|â‹|ğŸ„ƒ|à±©|â‘¢|â‘¶|â’Š|â“·|â¸|â‚|âŒ|ğŸ„„|à«©|â‘£|â‘·|â’‹|â“¸|â¹|âƒ|â|ğŸ„…|â‘¤|â‘¸|â’Œ|â“¹|âº|â„|â|â„|â|ğŸ„†|â‘¥|â‘¹|â’|â“º|â»|â…|â|ğŸ„‡|â‘¦|â‘º|â’|â“»|â¼|â†|â|ğ‘„½|ğŸ„ˆ|á‚˜|â‘§|â‘»|â’|â“¼|â½|â‡|â‘|ğŸ„‰|â‘¨|â‘¼|â’|â“½|â¾|âˆ|â’|ğŸ„Š|â“ª|â“¿|ğŸ„‹|ğŸ„Œ|ğŸ„|ğŸ„€|ğŸ|ğŸ˜|ğŸ¢|ğŸ¬|ğŸ|ğŸ™|ğŸ­|ğŸ£|ğŸ¶|ğŸ|ğŸš|ğŸ®|ğŸ¤|ğŸ·|ğŸ‘|ğŸ›|ğŸ¯|ğŸ¥|ğŸ¸|ğŸ’|ğŸœ|ğŸ°|ğŸ¦|ğŸ¹|ğŸ“|ğŸ|ğŸ±|ğŸ§|ğŸº|ğŸ”|ğŸ|ğŸ²|ğŸ¨|ğŸ»|ğŸ•|ğŸŸ|ğŸ³|ğŸ©|ğŸ¼|ğŸ–|ğŸ |ğŸ´|ğŸª|ğŸ½|ğŸ—|ğŸ¡|ğŸµ|ğŸ«|ğŸ¾|ğŸ¿|1|2|3|4|5|6|7|8|9|0)))(?(DEFINE) (?<plus>(?:â”¼|â•‚|â•‹|å|â”¿|âœš|âœ™|â•|Â±|Ë–|á©|âº|â‚Š|âˆ“|âˆ”|âŠ•|âŠ|âŸ´|â§º|â§»|â¨|â¨„|â¨¢|â¨£|â¨¤|â¨¥|â¨¦|â¨§|â¨¨|â¨­|â¨®|â¨¹|â©±|â©²|â¬²|ï¹¢|ï¼‹|á›­|âœ|â˜©|â˜¨|â˜¦|â™°|â™±|â›¨|âœ™|âœš|âœ›|âœœ|âœ|âœ|âœŸ|âœ |êšš|êš›|ğŸ•€|ğŸ•|ğŸ•‚|ğŸ•†|ğŸ•‡|ğŸ•ˆ|ğŸ¡|ğŸ¢|ğŸ£|ğŸ¤|ğŸ¥|ğŸ¦|ğŸ§|\+)))(?(DEFINE) (?<ones>(?:ï¼‘|ğŸ|ğŸ™|ğŸ£|ğŸ­|ğŸ·|â’ˆ|â“µ|â¶|â€|âŠ|ğŸ„‚|ß|â‘ |â‘´|1)))(?:[^$\d]\K)(?:(?:(?&plus)\s?\s?(?&nums){1,2})?(?&nums){10})(?:[^\d]|([^.]{2,}))%ig";

// parse the PCRE regexp into a JS RegExp
var keys = [];
var re = PCRE(url, keys);

// console.log(keys);
// [ , 'username', , 'id' ]

// console.log(re);
// /^https?://twitter\.com(/\#\!)?/([a-zA-Z0-9_]{1,20})\/status(es)?/(\d+)/?$/gi

var match = re.exec('https://twitter.com/tootallnate/status/481604870626349056');
console.log(match);